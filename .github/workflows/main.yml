name: CI
on: [push]

jobs:
 build-and-run:
  runs-on: ubuntu-latest
  
  steps:
  - uses: actions/checkout@v1
    
  - name: Build Code
    run: make Hello.java
    
  - name: run
    run: java Hello
   
  - name: SAST-scan 
    uses: AppThreat/sast-scan-action@1.0.2
    with:
       output: sast-reports
       type: java
       
  - name: The scan has failed
    if: failure()
    run: echo 'The Scan failed'
    
   # upload artifact
  - name: Upload scan reports
    if: always()
    uses: actions/upload-artifact@v1.0.0
    with:
        name: sast-reports
        path: sast-reports   
 
